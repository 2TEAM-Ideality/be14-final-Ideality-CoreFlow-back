<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <style>
        @page {
            size: A4;
            margin: 0;
            @bottom-right {
                content: counter(page);
                font-size: 12px;
                color: #888;
            }
        }

        @font-face {
            font-family: 'NotoSansKR';
            src: url('../fonts/NotoSansKR-Regular.ttf') format('truetype');
        }

        /* í…Œì´ë¸” ë°ì´í„°ê°€ í˜ì´ì§€ë¥¼ ë„˜ì–´ê°€ë„ ìœ íš¨í•˜ë„ë¡ */
        thead {
            display: table-header-group;
        }
        tfoot {
            display: table-footer-group;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            counter-reset: page;
        }
        /* ì»¤ë²„ ìŠ¤íƒ€ì¼ */
        .cover-page {
            background-color: #2D4E9B;
            color: white;
            padding: 50px;
            height: 297mm;
            box-sizing: border-box;
        }

        .logo {
            width: 150px;
            margin-bottom: 50px;
        }
        .report-type {
            font-size: 15px;
            padding-bottom: 50px;
            margin-bottom: 100px;
        }

        .project-title {
            font-size: 32px;
            font-weight: 600;
            margin: 10px 0 30px 0;
        }

        .meta-info {
            font-size: 14px;
            margin-bottom: 4px;
        }

        .line {
            width: 100%;
            height: 2px;
            background-color: #ffffff;
            margin: 16px 0 32px 0;
        }
        .sub-line {
            height: 2px;
            width: 70%;
            background-color: white;
            margin: 13px 0 15px 0;
        }


        .contents-title {
            color: #FFD600;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .content-container {
            margin-top: 200px;

        }
        .sub-title {
            margin-top: 10px;
            margin-bottom: 10px;
            color: #001560;
            font-weight: bold;
            font-size: 12px;
        }
        .contents {
            width: 100%;
            text-align: justify;
            justify-content: space-between;
        }

        .content-block {
            display: inline-block;
            width: 23%;
            margin-right: 1%;
            vertical-align: top;
        }

        .content-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .content-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .content-subtext {
            font-size: 12px;
            color: #e0e0e0;
            line-height: 1.4;
        }

        .page-break {
            page-break-after: always;
        }

        /* ìš”ì•½ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .summary-page {
            background-color: white;
            color: black;
            padding: 50px;
            height: 297mm;
            box-sizing: border-box;
        }

        .section-title {
            font-size: 22px;
            font-weight: bold;
            color: #001560;
            border-bottom: 2px solid #001560;
            padding-bottom: 10px;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5px;
        }

        .info-table th, .info-table td {
            font-size: 10px;
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
        }

        .info-table th {
            background-color: #f2f2f2;
        }

        /* ì‘ì—… ê³µì • í˜ì´ì§€  */
        .process-page {
            background-color: white;
            color: black;
            padding: 50px;
            height: 297mm;
            box-sizing: border-box;
        }
        .process-table td {
            padding: 4px 6px;
            height: auto;
        }

        /*  ì§€ì—° ë¶„ì„ í˜ì´ì§€   */
        .delay-page {
            background-color: white;
            color: black;
            padding: 50px;
            height: 297mm;
            box-sizing: border-box;
        }

    </style>
</head>
<body>

<!-- ğŸŸ¦ Cover Page (1í˜ì´ì§€) -->
<div class="cover-page">
    <div class="logo-header">
        <img th:src="'data:image/png;base64,' + ${coverLogo}" class="logo" alt="Core Flow Logo" />
    </div>

    <p class="project-title" th:text="${name}"></p>

    <p class="meta-info">ì‘ì„±ì¼ì&nbsp;&nbsp;&nbsp; <span th:text="${createdAt}"></span></p>
    <p class="meta-info">ì´ê´„ ì±…ì„ì&nbsp;&nbsp;&nbsp; <span th:text="${director}"></span></p>

    <div class="line"></div>

    <div class="content-container">
        <p class="contents-title">Contents :</p>
        <div class="contents">
            <div class="content-block">
                <p class="content-number">01</p>
                <div class="sub-line"></div>
                <p class="content-title">í”„ë¡œì íŠ¸ ê°œìš”</p>
                <p class="content-subtext">í”„ë¡œì íŠ¸ëª…<br />ìˆ˜í–‰ ê¸°ê°„<br />ê´€ë¦¬ì</p>
            </div>
            <div class="content-block">
                <p class="content-number">02</p>
                <div class="sub-line"></div>
                <p class="content-title">ì‘ì—… ê³µì •</p>
                <p class="content-subtext">ì „ì²´ ì¼ì • ìš”ì•½<br />ê³µì •ë³„ ì§„í–‰ë¥  ë° ì¼ì •<br />ì£¼ìš” ë§ˆì¼ìŠ¤í†¤ ë¦¬ìŠ¤íŠ¸</p>
            </div>
            <div class="content-block">
                <p class="content-number">03</p>
                <div class="sub-line"></div>
                <p class="content-title">ì§€ì—° ë¶„ì„</p>
                <p class="content-subtext">ì „ì²´ ì§€ì—° ê¸°ê°„ ë¶„ì„<br />ì§€ì—° ì›ì¸ ë¶„ì„<br />ì§€ì—° ì‚¬ìœ ì„œ ëª©ë¡</p>
            </div>
            <div class="content-block">
                <p class="content-number">04</p>
                <div class="sub-line"></div>
                <p class="content-title">ì„±ê³¼ í‰ê°€</p>
                <p class="content-subtext">ì „ì²´ ë‚©ê¸° ì¤€ìˆ˜ìœ¨<br />í‰ê·  ì§€ì—°ì¼ / ì„±ê³¼ ë¹„êµ<br />ì£¼ìš” ì‚°ì¶œë¬¼ ëª©ë¡<br />í–¥í›„ ê°œì„  ì‚¬í•­</p>
            </div>
        </div>
    </div>
</div>

<div class="page-break"></div>

<!-- â¬œ 01 ì±•í„° - í”„ë¡œì íŠ¸ ìš”ì•½ í˜ì´ì§€ (1) -->
<div class="summary-page">
    <div class="logo-header">
        <img th:src="'data:image/png;base64,' + ${contentLogo}"
             alt="Core Flow Logo"
             style="height: 40px; width: auto;" />
    </div>

    <p class="section-title">01 í”„ë¡œì íŠ¸ ê°œìš”</p>

    <div class="sub-title" style="margin-top: 30px;">
        í”„ë¡œì íŠ¸ ìš”ì•½
    </div>
    <table class="info-table">
        <tr>
            <th>í”„ë¡œì íŠ¸ëª…</th>
            <td><strong>26FW í•œí™” ì´ê¸€ìŠ¤ ì½œë¼ë³´ í”„ë¡œì íŠ¸</strong></td>
        </tr>
        <tr>
            <th>ì„¤ëª…</th>
            <td>2025ë…„ S/S ì‹œì¦Œ ì‹ ì œí’ˆìœ¼ë¡œ ê¸°íšëœ íŒ¨ì…˜ ìì¼“ì˜ ê°œë°œ í”„ë¡œì íŠ¸</td>
        </tr>
        <tr>
            <th>ì´ê´„ ê´€ë¦¬ì</th>
            <td>í™ê¸¸ë™ ê¸°íšíŒ€ íŒ€ì¥</td>
        </tr>
        <tr>
            <th>ì§„í–‰ ê¸°ê°„</th>
            <td>2025-03-01 ~ 2025-03-31 (ì´ 31ì¼)</td>
        </tr>
        <tr>
            <th>ì‘ì„± ì¼ì</th>
            <td>2025-04-01</td>
        </tr>
        <tr>
            <th>ì§€ì—°ì¼</th>
            <td>1ì¼</td>
        </tr>
    </table>

    <!-- ì°¸ì—¬ì ëª©ë¡ -->
    <div class="sub-title" style="margin-top: 30px;">
        ë¶€ì„œë³„ ì°¸ì—¬ì
    </div>
    <table class="info-table">
        <tr th:each="team : ${teamList}">
            <th th:text="${team.name + ' (' + team.count + ')'}">ë””ìì¸ íŒ€ (3)</th>
            <td>
                <div><strong>ì±…ì„ì</strong> <span th:text="${team.manager}">í™ê¸¸ë™</span></div>
                <div th:each="member : ${team.members}">
                    <span th:text="${member}">í™ê¸¸ë™</span><br />
                </div>
            </td>
        </tr>
    </table>

</div>

<div class="page-break"></div>

<!-- â¬œ 02 ì±•í„° - ì‘ì—… ê³µì • í˜ì´ì§€ (2 ~) -->
<div th:each="page, stat : ${pagedTaskList}">
    <div class="process-page">
        <!-- ë¡œê³  + ì œëª© -->
        <div class="logo-header">
            <img th:src="'data:image/png;base64,' + ${contentLogo}"
                 alt="Core Flow Logo"
                 style="height: 40px; width: auto;" />
        </div>

        <p class="section-title"
           th:text="${stat.index == 0} ? '02 ì‘ì—… ê³µì •' : ''"></p>

        <div class="sub-title">ì‘ì—… ê³µì • ë‚´ì—­ -
            <span th:text="${stat.index + 1}"></span>
        </div>

        <table class="info-table process-table">
            <thead>
            <tr>
                <th style="width: 15px; padding: 3px"></th>
                <th>ì—…ë¬´</th>
                <th>ì™„ë£Œìœ¨</th>
                <th>ë² ì´ìŠ¤ë¼ì¸</th>
                <th>ì‹¤ì œ ì‘ì—… ê¸°ê°„</th>
                <th>ê³„íš ëŒ€ë¹„</th>
                <th>ìƒíƒœ</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="task , idx: ${page}">
                <td th:text="${idx.index + 1 + (stat.index * 15)}"></td>
                <td th:text="${task.taskName}">íŒ¨í„´ ìƒì„±</td>
                <td th:text="${task.progress} + '%'">95%</td>
                <td th:text="${task.baseStart} + ' ~ ' + ${task.baseEnd}">2025-03-05 ~ 2025-03-08</td>
                <td th:text="${task.realStart} + ' ~ ' + ${task.realEnd}">2025-03-05 ~ 2025-03-09</td>
                <td th:text="'+' + ${task.delay} + 'ì¼'"
                    th:style="${task.delay > 0} ? 'color: red;' : ''">+1ì¼</td>
                <td th:text="${task.status}">ì§€ì—°</td>
            </tr>
            </tbody>
        </table>

        <!-- ì´ê³„ ì •ë³´: ë§ˆì§€ë§‰ í˜ì´ì§€ì—ë§Œ í‘œì‹œ -->
        <div class="sub-title" th:if="${stat.last}">
            ì‘ì—… ê³µì • ê²°ê³¼
        </div>
        <table class="process-result info-table" th:if="${stat.last}">
            <thead>
            <tr>
                <th>ì „ì²´ íƒœìŠ¤í¬</th>
                <th>ì™„ë£Œìœ¨</th>
                <th>ë² ì´ìŠ¤ë¼ì¸</th>
                <th>ì‹¤ì œ ì‘ì—… ê¸°ê°„</th>
                <th>ê³„íš ëŒ€ë¹„</th>
                <th>ìƒíƒœ</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td style="font-weight: bold;">ì´ê³„ <span th:text="${taskList.size()}"></span></td>
                <td th:text="${total['progress']} + '%'" style="font-weight: bold;">98%</td>
                <td th:text="${total['baseStart']} + ' ~ ' + ${total['baseEnd']}">2025-03-01 ~ 2025-03-21</td>
                <td th:text="${total['realStart']} + ' ~ ' + ${total['realEnd']}">2025-03-01 ~ 2025-03-31</td>
                <td th:text="'+' + ${total['delay']} + 'ì¼'"
                    th:style="${total['delay']} > 0 ? 'color: red;' : ''">+10ì¼</td>
                <td th:text="${total['status']}">ì§€ì—°</td>
            </tr>
            </tbody>

        </table>


        <div class="page-break"></div>
    </div>

</div>
<div class="page-break"></div>


<!-- â¬œ 03 ì±•í„° - ì§€ì—° ë¶„ì„ í˜ì´ì§€ (ë‹¤ì¤‘ í˜ì´ì§€ ì§€ì›) -->
<div th:each="page, stat : ${pagedDelayReportList}">
    <div class="delay-page">
        <div class="logo-header">
            <img th:src="'data:image/png;base64,' + ${contentLogo}"
                 alt="Core Flow Logo"
                 style="height: 40px; width: auto;" />
        </div>


        <p class="section-title" th:text="${stat.index == 0} ? '03 ì§€ì—° ë¶„ì„' : ''"></p>

        <div class="chart-section" th:if="${stat.index == 0}">
            <div style="display: inline-block; width: 45%;">
                <p class="sub-title">ì§€ì—° íƒœìŠ¤í¬ ë¶„ì„</p>
                <img th:src="'data:image/png;base64,' + ${pieChartBase64}" width="100%" />
            </div>
            <div style="display: inline-block; width: 45%;">
                <p class="sub-title">ì§€ì—° ì‚¬ìœ  ë¶„ì„</p>
                <img th:src="'data:image/png;base64,' + ${delayReasonChart}" width="100%" />
            </div>
        </div>

        <div class="sub-title" style="margin-top: 30px;">ì§€ì—° ì‚¬ìœ ì„œ ë‚´ì—­ - <span th:text="${stat.index + 1}"></span></div>
        <table class="info-table">
            <thead>
            <tr>
                <th>ì—…ë¬´ êµ¬ë¶„(íƒœìŠ¤í¬ëª…)</th>
                <th>ìƒì„±ì¼</th>
                <th>ê²°ì¬ì</th>
                <th>íŒŒì¼ ë§í¬</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${page}">
                <td th:text="${item.taskName}">íŒ¨í„´ ìƒì„±</td>
                <td th:text="${item.createdAt}">2025-03-08</td>
                <td th:text="${item.approver}">í™ê¸¸ë™ ê¸°íšíŒ€ íŒ€ì¥</td>
                <td><a th:href="${item.fileUrl}">LINK</a></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="page-break"></div>
</div>

<div class="page-break"></div>
<div th:each="page, stat : ${pagedOutputList}">
    <div class="delay-page">
        <div class="logo-header">
            <img th:src="'data:image/png;base64,' + ${contentLogo}"
                 alt="Core Flow Logo"
                 style="height: 40px; width: auto;" />
        </div>

        <p class="section-title" th:text="${stat.index == 0} ? '04 ì„±ê³¼ í‰ê°€' : ''"></p>

        <!-- í‰ê°€ ìš”ì•½ ì •ë³´ëŠ” ì²« í˜ì´ì§€ì—ë§Œ -->
        <div th:if="${stat.index == 0}">
            <div class="sub-title">ì„±ê³¼ í‰ê°€</div>
            <table class="info-table">
                <tr>
                    <th>ì „ì²´ ë‚©ê¸° ì¤€ìˆ˜ìœ¨</th>
                    <th>ì „ì²´ íƒœìŠ¤í¬</th>
                    <th>íƒœìŠ¤í¬ë³„ í‰ê·  ì§€ì—°ì¼</th>
                    <th>ì´ ì§€ì—°ì¼</th>
                </tr>
                <tr>
                    <td style="color: #0A84FF; font-weight: bold;">92.4%</td>
                    <td>24</td>
                    <td style="color: red;">+2.4ì¼</td>
                    <td style="color: red;">+10ì¼</td>
                </tr>
            </table>

            <div class="sub-title" style="margin-top: 20px;">ì£¼ìš” ë³‘ëª© ê³µì •</div>
            <div style="font-size: 12px;">ìì¼“ ë´‰ì œ, í”„ë¦°íŠ¸</div>
        </div>

        <div class="sub-title" style="margin-top: 20px;">ì‚°ì¶œë¬¼ ëª©ë¡</div>
        <!-- ì‚°ì¶œë¬¼ ëª©ë¡ í…Œì´ë¸” -->
        <table class="info-table">
            <thead>
            <tr>
                <th>ê´€ë ¨ íƒœìŠ¤í¬</th>
                <th>ì‚°ì¶œë¬¼ ëª…</th>
                <th>ë“±ë¡ì</th>
                <th>ë“±ë¡ì¼</th>
                <th>ë¯¸ë¦¬ë³´ê¸°</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${page}">
                <td th:text="${item.task}">ìì¼“ ë´‰ì œ</td>
                <td th:text="${item.filename}">ì œí’ˆê¸°íšì„œ.pdf</td>
                <td th:text="${item.uploader}">ê¸°íšíŒ€ ê¹€í•˜ëŠ˜</td>
                <td th:text="${item.uploadDate}">2025-05-01</td>
                <td><a th:href="${item.fileUrl}">LINK</a></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="page-break"></div>
</div>



</body>
</html>
